(function(t){function e(e){for(var n,s,r=e[0],c=e[1],l=e[2],d=0,m=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&m.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==a[c]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},a={app:0},o=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/gpx/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},"034f":function(t,e,i){"use strict";i("85ec")},"07fc":function(t,e,i){"use strict";i("68f1")},"0cb1":function(t,e,i){"use strict";i("c194")},1:function(t,e){},2:function(t,e){},5490:function(t,e,i){"use strict";i("a6b6")},5982:function(t,e,i){},"68f1":function(t,e,i){},"734c":function(t,e,i){"use strict";i("5982")},"85ec":function(t,e,i){},a6b6:function(t,e,i){},c194:function(t,e,i){},cd49:function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Map",{staticClass:"map"})],1)},o=[],s=i("d4ec"),r=i("bee2"),c=i("262e"),l=i("2caf"),u=i("9ab4"),d=i("60a3"),m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"map outer"},[i("div",{staticClass:"map-content",attrs:{id:"map"}}),i("Info",{staticClass:"info-content",attrs:{message:t.infoText,currentTrackIndex:t.currentTrackIndex,currentSegmentIndex:t.currentSegmentIndex},on:{"size-to-bounds":function(e){return t.sizeToBounds(e)},"add-rectangle":function(e){return t.addRectangle(e)},"goto-location":function(e){return t.gotoLocation(e)},"select-track-index":function(e){return t.selectTrackIndex(e)},"select-segment-time":function(e){return t.selectSegmentByTime(e)},"select-waypoint-time":function(e){return t.selectWaypointTime(e)},"toggle-visibility":function(e){return t.toggleVisibility(e)}}})],1)},h=[],p=i("ade3"),f=i("2909"),g=(i("4ec9"),i("d3b7"),i("3ca3"),i("ddb0"),i("d81d"),i("99af"),i("b0c0"),i("4de4"),i("6062"),i("159b"),i("fb6a"),i("25f0"),i("e11e")),v=i.n(g),b=i("b85c"),y=(i("d9e2"),i("caad"),i("2532"),i("ac1f"),i("1276"),i("d425")),k=(i("4d90"),i("a15b"),i("1315")),x=function(){function t(){Object(s["a"])(this,t)}return Object(r["a"])(t,[{key:"nowWithMsecs",value:function(){return k["DateTime"].local().toFormat("HH:mm:ss.SSS")}},{key:"durationAsSeconds",value:function(t,e){return Math.abs(t.diff(e).valueOf()/1e3)}},{key:"secondsInSegment",value:function(t){var e=t.points[0],i=t.points.slice(-1)[0];return this.durationAsSeconds(e.timestamp,i.timestamp)}},{key:"formatDuration",value:function(t){var e="h:mm:ss";return 0==t.hours&&(e="m:ss"),t.toFormat(e)}},{key:"secondsToDuration",value:function(t){return t<3600&&"m:ss",this.formatDuration(k["Duration"].fromMillis(1e3*t))}},{key:"durationGpx",value:function(t){return this.duration(t.startDate,t.endDate)}},{key:"durationPoints",value:function(t,e){return this.duration(t.timestamp,e.timestamp)}},{key:"duration",value:function(t,e){if(e<t){var i=t;t=e,e=i}return this.formatDuration(e.diff(t,["hours","minutes","seconds"]))}},{key:"distance",value:function(t){return this.milesString(t.kilometers)}},{key:"yardsString",value:function(t){return this.milesString(t/1e3)}},{key:"distanceMeters",value:function(t){return this.distanceKilometers(t/1e3)}},{key:"distanceKilometers",value:function(t){return t<.001?"".concat(Math.round(1e3*t*100)/100," meters"):t<1?"".concat(t<.01?Math.round(1e3*t*10)/10:Math.round(1e3*t)," meters"):"".concat(Math.round(100*t)/100," km")}},{key:"milesString",value:function(e){var i=e*t.kilometersPerMile;return i<1e-5?"-":i<.0017?"".concat(Math.round(i*t.feetPerMile)," feet"):i<1?"".concat(i<.01?Math.round(i*t.yardsPerMile*10)/10:Math.round(i*t.yardsPerMile)," yards"):"".concat(Math.round(100*i)/100," miles")}},{key:"pad",value:function(t,e){return t.toString().padStart(e,"0")}},{key:"speedMs",value:function(t,e){if(e<.1)return"- m/s";var i=t/e;return"".concat(Math.round(100*i)/100," m/s")}},{key:"speedMsToMph",value:function(t){var e=2.2369363*t;return"".concat(Math.round(e)/10," mph")}},{key:"speedMph",value:function(e,i){if(e<1e-5||i<1e-5)return"-";var n=i*t.kilometersPerMile,a=n/(e/3600);return"".concat(Math.round(10*a)/10," mph")}},{key:"speedKmh",value:function(t){return"".concat(Math.round(10*t)/10," km/h")}},{key:"dayOfWeek",value:function(t,e){return this.dateTime(t,e).weekdayLong}},{key:"date",value:function(t,e){return this.dateTime(t,e).setLocale("en-US").toLocaleString()}},{key:"timeWithSeconds",value:function(t,e){return this.dateTime(t,e).toFormat("HH:mm.ss")}},{key:"shortTime",value:function(t,e){return this.dateTime(t,e).toFormat("HH:mm a")}},{key:"shortTimezoneName",value:function(t){return k["DateTime"].utc().setZone(t).offsetNameShort}},{key:"dateTime",value:function(t,e){var i;i=t instanceof k["DateTime"]?t.toISO():t.toString();var n=""===e?"UTC":e;return k["DateTime"].fromISO(i,{zone:n})}},{key:"join",value:function(t){return t.join(", ")}},{key:"firstFew",value:function(t){if(!t)return"";var e=t.slice(0,2).join(", ");return t.length>2&&(e+=", ..."),e}}]),t}();x.kilometersPerMile=.62137,x.yardsPerMile=1760,x.feetPerMile=5280;var T=new x,S=function(){function t(){Object(s["a"])(this,t)}return Object(r["a"])(t,null,[{key:"earthRadiusMeters",get:function(){return 6372800}},{key:"parseLatLon",value:function(t){var e=t;if(!t.includes(",")){var i=t.split(" ");2==i.length&&(e="".concat(i[0],", ").concat(i[1]))}try{var n=y["a"].parse(e);return[n.lat,n.lon]}catch(a){return}}},{key:"normalizeDegrees",value:function(t){return t>=0&&t<=360?t:t>360?t-360:t<0?t+360:t}},{key:"distanceGpx",value:function(t,e){return this.distanceLL(t.latitude,t.longitude,e.latitude,e.longitude)}},{key:"distanceSegment",value:function(t,e){for(var i=0,n=1;n<t.points.length&&t.points[n].timestamp<=e.timestamp;++n)i+=this.distanceGpx(t.points[n-1],t.points[n]);return i}},{key:"distanceLL",value:function(t,e,i,n){var a=this.toRad(i-t),o=this.toRad(n-e),s=this.toRad(t),r=this.toRad(i),c=Math.sin(a/2)*Math.sin(a/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(s)*Math.cos(r),l=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return this.earthRadiusMeters*l}},{key:"toRad",value:function(t){return t*Math.PI/180}},{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"bearing",value:function(e,i,n,a){var o=t.toRad(e),s=t.toRad(i),r=t.toRad(n),c=t.toRad(a),l=Math.sin(c-s)*Math.cos(r),u=Math.cos(o)*Math.sin(r)-Math.sin(o)*Math.cos(r)*Math.cos(c-s),d=t.toDegrees(Math.atan2(l,u));return Math.floor((d+360)%360)}},{key:"pointAlongBearing",value:function(t,e,i,n){var a=this.toRad(i),o=n/this.earthRadiusMeters,s=this.toRad(t),r=this.toRad(e),c=Math.sin(s)*Math.cos(o)+Math.cos(s)*Math.sin(o)*Math.cos(a),l=Math.asin(c),u=Math.sin(a)*Math.sin(o)*Math.cos(s),d=Math.cos(o)-Math.sin(s)*c,m=r+Math.atan2(u,d);return{lat:this.toDegrees(l),lon:this.toDegrees(m)}}},{key:"nearestPoint",value:function(e,i,n){var a=this,o=e[0],s=o,r=this.distanceLL(o.latitude,o.longitude,i,n),c=0,l={latitude:i,longitude:n,timestamp:k["DateTime"].now(),calculatedMeters:0,elevation:0,speed:0,course:0,calculatedCourse:0,calculatedKmh:0};e.forEach((function(i,n){var u=i;n>0&&(c+=a.distanceGpx(e[n],i),u=e[n-1]);var d=t.distanceGpx(i,l);d<r&&(r=d,o=i,s=u)}));var u=T.duration(e[0].timestamp,o.timestamp),d=T.distanceMeters(c);return{point:o,prevPoint:s,distance:d,duration:u}}}]),t}(),L=i("0f4d"),O=i("e002"),M=i.n(O),w=function(){function t(){Object(s["a"])(this,t)}return Object(r["a"])(t,null,[{key:"fromGpx",value:function(t){try{return M()(t.latitude,t.longitude)}catch(e){return""}}}]),t}(),_=function(){function t(){Object(s["a"])(this,t),this.minLat=0,this.maxLat=0,this.minLon=0,this.maxLon=0}return Object(r["a"])(t,[{key:"parse",value:function(t,e,i){return this.parse_txml(t,e,i)}},{key:"parse_txml",value:function(t,e,i){var n=this;return new Promise((function(a,o){var s=Object(L["a"])(e),r=Object(L["b"])(s),c=r.gpx;if(r.gpx&&Array.isArray(r.gpx)&&0!=c.length&&r.gpx[0]){var l,u=[],d=Object(b["a"])(r.gpx[0].trk);try{for(d.s();!(l=d.n()).done;){var m=l.value;u.push(n.processTrack(m,i))}}catch(w){d.e(w)}finally{d.f()}var h=u[0].segments[0].timezoneName,p=[];if(r.gpx[0].wpt){var f,g=Object(b["a"])(r.gpx[0].wpt);try{for(g.s();!(f=g.n()).done;){var v=f.value;p.push(n.processWaypoint(v,h))}}catch(w){g.e(w)}finally{g.f()}}var y={maxLat:n.maxLat,minLat:n.minLat,maxLon:n.maxLon,minLon:n.minLon},k=u[0].segments[0].points[0].timestamp,x=u.slice(-1)[0].segments.slice(-1)[0].points.slice(-1)[0].timestamp,T={waypoints:p,tracks:u,bounds:y,name:t,startDate:k,endDate:x,seconds:x.diff(k).valueOf()/1e3,kilometers:u.map((function(t){return t.kilometers})).reduce((function(t,e){return t+e})),timezoneName:h};if(r.gpx[0].extensions&&r.gpx[0].extensions[0]["rangic:seconds"]){var S=r.gpx[0].extensions[0],O={},M=[];T.rangic={kilometers:S["rangic:kilometers"][0],seconds:S["rangic:seconds"][0],timezoneInfo:{tag:"",id:""},countryNames:S["rangic:countryNames"][0].country,stateNames:S["rangic:stateNames"][0].state,cityNames:S["rangic:cityNames"][0].city,sites:S["rangic:sites"][0].site,siteNames:M,siteToLocation:O}}a(T)}else o(new Error("Not a GPX file"))}))}},{key:"processWaypoint",value:function(t,e){var i={latitude:t._attributes.lat,longitude:t._attributes.lon,timestamp:k["DateTime"].fromISO(t.time[0]),seconds:0,name:t.name[0],comment:t.cmt?t.cmt[0]:"",timezoneName:e};if(t.extensions&&t.extensions[0]["rangic:begin"]){var n=t.extensions[0],a=k["DateTime"].fromISO(n["rangic:begin"][0]._attributes.time),o=k["DateTime"].fromISO(n["rangic:finish"][0]._attributes.time),s={minLat:n["rangic:begin"][0]._attributes.lat,minLon:n["rangic:begin"][0]._attributes.lon,maxLat:n["rangic:finish"][0]._attributes.lat,maxLon:n["rangic:finish"][0]._attributes.lon};i.rangic={stopType:n["rangic:stopType"][0],description:n["rangic:description"][0],beginLatitude:n["rangic:begin"][0]._attributes.lat,beginLongitude:n["rangic:begin"][0]._attributes.lon,beginTime:a,finishLatitude:n["rangic:finish"][0]._attributes.lat,finishLongitude:n["rangic:finish"][0]._attributes.lon,finishTime:o,seconds:o.diff(a).valueOf()/1e3,bounds:s},i.seconds=i.rangic.seconds}return i}},{key:"processTrack",value:function(t,e){var i,n=[],a=Object(b["a"])(t.trkseg);try{for(a.s();!(i=a.n()).done;){var o=i.value;n=n.concat(this.processSegment(o,e))}}catch(c){a.e(c)}finally{a.f()}var s={segments:n,kilometers:n.map((function(t){return t.kilometers})).reduce((function(t,e){return t+e}))};if(t.extensions&&t.extensions[0]["rangic:kilometers"]){var r=t.extensions[0];s.rangic={kilometers:r["rangic:kilometers"],seconds:r["rangic:seconds"],bounds:this.processBounds(r["rangic:bounds"][0])}}return s}},{key:"processSegment",value:function(t,e){var i,n=[],a=[],o=0,s=void 0;if(t.extensions&&t.extensions[0]["rangic:meters"]){var r=t.extensions[0];i={kilometers:1e3*r["rangic:meters"][0],kmh:r["rangic:kmh"][0],seconds:r["rangic:seconds"][0],course:r["rangic:course"][0],bounds:this.processBounds(r["rangic:bounds"][0])}}var c,l=Object(b["a"])(t.trkpt);try{for(l.s();!(c=l.n()).done;){var u=c.value,d=this.processPoint(u);if(0===this.minLat?(this.minLat=d.latitude,this.maxLat=d.latitude,this.minLon=d.longitude,this.maxLon=d.longitude):(this.minLat=Math.min(d.latitude,this.minLat),this.maxLat=Math.max(d.latitude,this.maxLat),this.minLon=Math.min(d.longitude,this.minLon),this.maxLon=Math.max(d.longitude,this.maxLon)),s){var m=d.timestamp.diff(s.timestamp).valueOf()/1e3;if(!e&&m>30){if(a.length>1){var h=w.fromGpx(a[0]),p={points:a,kilometers:o/1e3,seconds:a.slice(-1)[0].timestamp.diff(a[0].timestamp).valueOf()/1e3,timezoneName:h};i&&(p.rangic=i),n.push(p),o=0}a=[]}else{var f=S.distanceGpx(s,d);d.calculatedCourse=S.bearing(s.latitude,s.longitude,d.latitude,d.longitude),d.calculatedMeters=f,d.calculatedKmh=f/1e3/(m/3600),o+=f}}a.push(d),s=d}}catch(y){l.e(y)}finally{l.f()}if(a.length>0){var g=w.fromGpx(a[0]),v={points:a,kilometers:o/1e3,seconds:a.slice(-1)[0].timestamp.diff(a[0].timestamp).valueOf()/1e3,timezoneName:g};i&&(v.rangic=i),n.push(v)}return n}},{key:"processPoint",value:function(t){var e={latitude:t._attributes.lat,longitude:t._attributes.lon,elevation:t.ele,speed:t.speed,course:t.course,timestamp:k["DateTime"].fromISO(t.time[0]),calculatedMeters:0,calculatedKmh:0};if(t.extensions&&t.extensions[0]["rangic:calculatedMeters"]){var i=t.extensions[0];e.rangic={calculatedMeters:i["rangic:calculatedMeters"][0],calculatedSeconds:i["rangic:calculatedSeconds"][0],calculatedKmh:i["rangic:calculatedKmh"][0],calculatedCourse:i["rangic:calculatedCourse"][0],transportationTypes:[]}}return e}},{key:"processBounds",value:function(t){return{minLat:t._attributes.minLat,minLon:t._attributes.minLon,maxLat:t._attributes.maxLat,maxLon:t._attributes.maxLon}}}],[{key:"isGpx",value:function(t){return void 0!==t.tracks}},{key:"isSegment",value:function(t){return void 0!==t.points}},{key:"isWaypoint",value:function(t){return void 0!==t.name}}]),t}(),C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"block"},[t.isLoading?i("div",{staticClass:"modal-background is-full-page",staticStyle:{"z-index":"1001"}},[t._m(0)]):t._e(),t.hasErrorMessage?i("b-notification",{attrs:{type:"is-danger",active:t.hasErrorMessage,"has-icon":"","aria-close-label":"Close notification",role:"alert"},on:{"update:active":function(e){t.hasErrorMessage=e}}},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e(),i("b-collapse",{staticClass:"panel",attrs:{open:t.isOpen,"aria-id":"content-id"},on:{"update:open":function(e){t.isOpen=e}}},[i("div",{staticClass:"panel-heading no-border no-background-color has-text-white",attrs:{slot:"trigger",role:"button","aria-controls":"content-id"},slot:"trigger"},[i("b-icon",{staticClass:"left-padding align-items-inherit",attrs:{icon:t.isOpen?"caret-down":"caret-up"}}),i("span",{staticClass:"left-padding is-size-4"},[t._v(" "+t._s(t.headerText)+" ")]),i("b-dropdown",{staticClass:"is-pulled-right above-map margin-left",attrs:{hoverable:"",position:"is-top-left","aria-role":"list"}},[i("button",{staticClass:"button is-info",attrs:{slot:"trigger"},slot:"trigger"},[i("b-icon",{attrs:{icon:"bars"}})],1),i("b-dropdown-item",{attrs:{"aria-role":"list-item"},on:{click:t.addTrack}},[t._v("Add a track ")]),i("b-dropdown-item",{attrs:{"aria-role":"list-item"},on:{click:function(e){t.parseLocationFailed="",t.isGotoLocationActive=!0}}},[t._v("Go to lat/lon ")]),i("b-dropdown-item",{attrs:{"aria-role":"list-item"},on:{click:function(e){t.isAddSquareActive=!0}}},[t._v("Add a square ")])],1),i("b-button",{staticClass:"is-pulled-right",attrs:{"icon-left":"route",type:"is-success"},on:{click:t.addTrack}},[t._v("Add a track")])],1),t.activeTracks>0?i("div",{staticClass:"track-container"},[i("b-tabs",{attrs:{type:"is-boxed",vertical:""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("b-tab-item",{attrs:{icon:"info"}},[i("div",{staticClass:"info-text-content is-size-5"},[i("div",[t._v(" "+t._s(t.infoFiles)+" ")]),i("div",[t._v(" "+t._s(t.infoDateAndTime)+" ")]),i("div",[t._v(" "+t._s(t.infoDistance)+" ")]),i("div",[t._v(" "+t._s(t.infoDuration)+" ")])])]),i("b-tab-item",{attrs:{icon:"route"}},[i("b-table",{attrs:{data:t.gpxStore.files,selected:t.selectedTrack},on:{"update:selected":function(e){t.selectedTrack=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[i("b-table-column",{attrs:{field:"size",label:"",centered:""}},[i("b-button",{attrs:{"icon-left":"vector-square",size:"is-small"},on:{click:function(i){return t.sizeToBounds(e.row)}}})],1),i("b-table-column",{attrs:{field:"name",label:"Name",centered:""}},[t._v(" "+t._s(e.row.name)+" ")]),i("b-table-column",{attrs:{field:"distance",label:"Distance",centered:""}},[t._v(" "+t._s(t.displayable.yardsString(1e3*e.row.kilometers))+" ")]),i("b-table-column",{attrs:{field:"date",label:"Date",centered:""}},[t._v(" "+t._s(t.displayable.dayOfWeek(e.row.startDate,e.row.timezoneName))+", "+t._s(t.displayable.date(e.row.startDate,e.row.timezoneName))+" ")]),i("b-table-column",{attrs:{field:"start",label:"Start",centered:""}},[t._v(" "+t._s(t.displayable.shortTime(e.row.startDate,e.row.timezoneName))+", "+t._s(t.displayable.shortTimezoneName(e.row.timezoneName))+" ")]),i("b-table-column",{attrs:{field:"end",label:"End",centered:""}},[t._v(" "+t._s(t.displayable.shortTime(e.row.endDate,e.row.timezoneName))+", "+t._s(t.displayable.shortTimezoneName(e.row.timezoneName))+" ")]),i("b-table-column",{attrs:{field:"duration",label:"Duration",centered:""}},[t._v(" "+t._s(t.displayable.durationGpx(e.row))+" ")]),i("b-table-column",{attrs:{field:"remove",label:"",centered:""}},[i("b-button",{attrs:{"icon-left":"trash",type:"is-danger",size:"is-small"},on:{click:function(i){return t.removeTrack(e.row)}}},[t._v("Remove")])],1)]}}],null,!1,3597940223)})],1),i("b-tab-item",{attrs:{icon:"project-diagram"}},[i("b-table",{attrs:{data:t.currentObjects,selected:t.selectedObject},on:{"update:selected":function(e){t.selectedObject=e}},scopedSlots:t._u([{key:"default",fn:function(e){return[i("b-table-column",{attrs:{field:"size",label:"C",centered:""}},[i("b-button",{attrs:{"icon-left":"vector-square",size:"is-small"},on:{click:function(i){return t.sizeToBounds(e.row)}}})],1),i("b-table-column",{attrs:{field:"visible",label:"V",centered:""}},[i("span",{staticClass:"pointer-cursor",on:{click:function(i){return t.toggleVisibility(e.row)}}},[i("b-icon",{attrs:{icon:e.row.visible?"check-square":"square"},on:{click:function(i){return t.toggleVisibility(e.row)}}})],1)]),i("b-table-column",{attrs:{field:"index",label:"Index",centered:""}},[t._v(" "+t._s(e.index+1)+" ")]),i("b-table-column",{attrs:{field:"points",label:"Type",centered:""}},[t._v(" "+t._s(t.getObjectType(e.row))+" ")]),i("b-table-column",{attrs:{field:"start",label:"Times",centered:""}},[t._v(" "+t._s(t.displayable.timeWithSeconds(t.getStartTime(e.row),t.gpxStore.files[t.currentTrackIndex].timezoneName))+" - "+t._s(t.displayable.timeWithSeconds(t.getEndTime(e.row),t.gpxStore.files[t.currentTrackIndex].timezoneName))+" ")]),i("b-table-column",{attrs:{field:"start",label:"Duration",centered:""}},[t._v(" "+t._s(t.displayable.secondsToDuration(t.getSeconds(e.row)))+" ")]),i("b-table-column",{attrs:{field:"meters",label:"Distance",centered:""}},[t._v(" "+t._s(t.displayable.yardsString(t.getDistance(e.row)))+" ")]),i("b-table-column",{attrs:{field:"speed",label:"Speed",centered:""}},[t._v(" "+t._s(t.displayable.speedMph(t.getSeconds(e.row),t.getDistance(e.row)/1e3))+" ")]),i("b-table-column",{attrs:{field:"points",label:" ",centered:""}},[t._v(" "+t._s(t.getExtraInfo(e.row))+" ")])]}}],null,!1,1099893862)})],1)],1)],1):t._e()]),i("b-modal",{staticStyle:{"z-index":"1000"},attrs:{active:t.isAddFileActive,"has-modal-card":"","trap-focus":"",scroll:"keep"},on:{"update:active":function(e){t.isAddFileActive=e}}},[i("div",{staticClass:"card add-file-card"},[i("b-field",[i("b-upload",{attrs:{multiple:"","drag-drop":""},model:{value:t.filesToAdd,callback:function(e){t.filesToAdd=e},expression:"filesToAdd"}},[i("section",{staticClass:"section"},[i("div",{staticClass:"content has-text-centered"},[i("p",[i("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),i("p",[t._v(" Drop GPX files here or click to select. ")])])])])],1),i("div",{staticClass:"tags add-file-tags"},t._l(t.filesToAdd,(function(e,n){return i("span",{key:n,staticClass:"tag is-primary"},[t._v(" "+t._s(e.name)+" "),i("button",{staticClass:"delete is-small",attrs:{type:"button"},on:{click:function(e){return t.filesToAdd.splice(n,1)}}})])})),0),i("div",[i("b-button",{attrs:{"icon-left":"plus",type:"is-success",disabled:t.filesToAdd.length<1},on:{click:t.addFiles}},[t._v(" Add ")]),i("b-button",{staticClass:"is-pulled-right",attrs:{type:"is-danger"},on:{click:function(e){t.isAddFileActive=!1}}},[t._v(" Cancel ")])],1)],1)]),i("b-modal",{staticStyle:{"z-index":"1000"},attrs:{active:t.isGotoLocationActive,"has-modal-card":"","trap-focus":"",scroll:"keep"},on:{"update:active":function(e){t.isGotoLocationActive=e}}},[i("div",{staticClass:"card goto-location-card"},[i("b-field",{attrs:{label:"Location",message:"lat,lon or Geohash"}},[i("b-input",{model:{value:t.gotoLocationField,callback:function(e){t.gotoLocationField=e},expression:"gotoLocationField"}})],1),t.parseLocationFailed.length>0?i("span",{staticClass:"has-text-danger"},[t._v(" "+t._s(t.parseLocationFailed)+" ")]):t._e(),i("div",[i("b-button",{attrs:{type:"is-success",disabled:t.gotoLocationField.length<1},on:{click:t.gotoLocation}},[t._v(" Go ")]),i("b-button",{staticClass:"is-pulled-right",attrs:{type:"is-danger"},on:{click:function(e){t.isGotoLocationActive=!1}}},[t._v(" Cancel ")])],1)],1)]),i("b-modal",{staticStyle:{"z-index":"1000"},attrs:{active:t.isAddSquareActive,"has-modal-card":"","trap-focus":"",scroll:"keep"},on:{"update:active":function(e){t.isAddSquareActive=e}}},[i("div",{staticClass:"card goto-location-card"},[i("b-field",{attrs:{label:"Location",message:"lat,lon OR lat,lon;lat,lon"}},[i("b-input",{model:{value:t.gotoLocationField,callback:function(e){t.gotoLocationField=e},expression:"gotoLocationField"}})],1),i("b-field",{attrs:{label:"Width/height (meters)",message:"The width and height, in meters"}},[i("b-input",{model:{value:t.addSquareWidthField,callback:function(e){t.addSquareWidthField=e},expression:"addSquareWidthField"}})],1),i("div",[i("b-button",{attrs:{type:"is-success",disabled:t.gotoLocationField.length<1},on:{click:t.addSquare}},[t._v(" Add ")]),i("b-button",{staticClass:"is-pulled-right",attrs:{type:"is-danger"},on:{click:function(e){t.isAddSquareActive=!1}}},[t._v(" Cancel ")])],1)],1)])],1)},j=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"progress"},[i("p",[t._v(" Loading ... ")]),i("progress",{staticClass:"progress-bar"})])}],P=(i("4e82"),i("498a"),i("a9e3"),function(t){Object(c["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.hasErrorMessage=!1,t.errorMessage="",t.activeTab=0,t.isOpen=!1,t.isLoading=!1,t.isAddFileActive=!1,t.isGotoLocationActive=!1,t.parseLocationFailed="",t.isAddSquareActive=!1,t.gotoLocationField="",t.addSquareWidthField="",t.filesToAdd=[],t.displayable=T,t.currentObjects=[],t.selectedTrack=Object(),t.selectedObject=Object(),t}return Object(r["a"])(i,[{key:"mounted",value:function(){this.gpxStore.files.length>0&&(this.isOpen=!0,this.onCurrentTrackChanged())}},{key:"sizeToObject",value:function(t){}},{key:"getObjectType",value:function(t){return _.isSegment(t)?"segment":_.isWaypoint(t)?"waypoint":"?"}},{key:"getSeconds",value:function(t){return _.isSegment(t)?T.secondsInSegment(t):_.isWaypoint(t)?t.rangic?T.durationAsSeconds(t.rangic.beginTime,t.rangic.finishTime):0:-1}},{key:"getDistance",value:function(t){return _.isSegment(t)?1e3*t.kilometers:_.isWaypoint(t)?t.rangic?S.distanceLL(t.rangic.beginLatitude,t.rangic.beginLongitude,t.rangic.finishLatitude,t.rangic.finishLongitude):0:-1}},{key:"getBearing",value:function(t){return _.isSegment(t)&&t.rangic?t.rangic.course:(_.isWaypoint(t),0)}},{key:"getStartTime",value:function(t){return _.isSegment(t)?t.points[0].timestamp:_.isWaypoint(t)?t.timestamp:k["DateTime"].now()}},{key:"getEndTime",value:function(t){return _.isSegment(t)?t.points.slice(-1)[0].timestamp:_.isWaypoint(t)?t.rangic?t.rangic.finishTime:t.timestamp:k["DateTime"].now()}},{key:"getExtraInfo",value:function(t){return _.isSegment(t)?"".concat(t.points.length," points"):_.isWaypoint(t)?t.rangic?t.rangic.stopType:t.name:""}},{key:"infoFiles",get:function(){return this.activeTracks<1?"":this.gpxStore.files.map((function(t){return t.name})).join(", ")}},{key:"onSelectedTrackChanged",value:function(t,e){var i,n=this.selectedTrack,a=0,o=Object(b["a"])(this.gpxStore.files);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s.startDate==n.startDate)break;a+=1}}catch(r){o.e(r)}finally{o.f()}this.$emit("select-track-index",a)}},{key:"onSelectedObjectChanged",value:function(t,e){_.isSegment(this.selectedObject)?this.$emit("select-segment-time",this.selectedObject.points[0].timestamp.toString()):_.isWaypoint(this.selectedObject)&&this.$emit("select-waypoint-time",this.selectedObject.timestamp.toString())}},{key:"onCurrentTrackChanged",value:function(){var t=this;if(this.currentObjects=[],!(this.currentTrackIndex<0||this.currentTrackIndex>=this.gpxStore.files.length)){var e=[];this.gpxStore.files[this.currentTrackIndex].tracks.forEach((function(t){t.segments.forEach((function(t){e.push(t)}))})),this.gpxStore.files[this.currentTrackIndex].waypoints.forEach((function(t){e.push(t)})),this.currentObjects=e.sort((function(e,i){return t.getStartTime(e).valueOf()-t.getStartTime(i).valueOf()})),this.currentObjects=e}}},{key:"onCurrentSegmentChanged",value:function(){var t,e=0,i=Object(b["a"])(this.currentObjects);try{for(i.s();!(t=i.n()).done;){var n=t.value;_.isSegment(n)&&e==this.currentSegmentIndex&&(this.selectedObject=this.currentObjects[e])}}catch(a){i.e(a)}finally{i.f()}}},{key:"infoDateAndTime",get:function(){if(this.activeTracks<1)return"";var t=this.gpxStore.files[0].startDate,e=this.gpxStore.files[0].endDate,i=this.gpxStore.files[0].timezoneName,n=i;this.gpxStore.files.forEach((function(a){a.startDate<t&&(t=a.startDate,i=a.timezoneName),a.endDate>e&&(e=a.endDate,n=a.timezoneName)}));var a=this.displayable.date(t,i),o=this.displayable.dayOfWeek(t,i),s=this.displayable.date(e,n),r=this.displayable.dayOfWeek(e,n),c=this.displayable.shortTime(t.toISO(),i),l=this.displayable.shortTime(e.toISO(),n);return a===s?"".concat(o,", ").concat(a," ").concat(c," - ").concat(l):"".concat(o,", ").concat(a," ").concat(c," - ").concat(r,", ").concat(s," ").concat(l)}},{key:"infoDistance",get:function(){if(this.activeTracks<1)return"";var t=this.gpxStore.files.map((function(t){return t.kilometers})).reduce((function(t,e){return t+e}));return this.displayable.milesString(t)}},{key:"infoDuration",get:function(){var t=this;if(this.activeTracks<1)return"";var e=this.gpxStore.files.map((function(e){return t.displayable.durationAsSeconds(e.startDate,e.endDate)})).reduce((function(t,e){return t+e}));return this.displayable.secondsToDuration(e)}},{key:"headerText",get:function(){return this.activeTracks<1?"No tracks available":this.message}},{key:"activeTracks",get:function(){return this.gpxStore.files.length}},{key:"addSquare",value:function(t){this.isAddSquareActive=!1;var e=this.gotoLocationField.split(",").filter((function(t){return t.trim().length})).map(Number);2==e.length||4==e.length&&this.$emit("add-rectangle",e)}},{key:"gotoLocation",value:function(t){var e=S.parseLatLon(this.gotoLocationField);e?(this.parseLocationFailed="",this.isGotoLocationActive=!1,this.$emit("goto-location",e)):this.parseLocationFailed="Unable to parse '".concat(this.gotoLocationField,"'")}},{key:"addTrack",value:function(t){this.filesToAdd=[],this.isAddFileActive=!0,t&&t.stopPropagation()}},{key:"removeTrack",value:function(t){this.gpxStore.remove(t)}},{key:"sizeToBounds",value:function(t){var e={minLat:0,minLon:0,maxLat:0,maxLon:0};_.isGpx(t)?e=t.bounds:_.isSegment(t)?e=t.rangic?t.rangic.bounds:this.segmentBounds(t):_.isWaypoint(t)&&(e.minLat=t.latitude,e.minLon=t.longitude,e.maxLat=t.latitude,e.maxLon=t.longitude),this.$emit("size-to-bounds",e)}},{key:"segmentBounds",value:function(t){var e,i=t.points[0].latitude,n=t.points[0].longitude,a=i,o=n,s=Object(b["a"])(t.points);try{for(s.s();!(e=s.n()).done;){var r=e.value;i=Math.min(i,r.latitude),n=Math.min(n,r.longitude),a=Math.max(a,r.latitude),o=Math.max(o,r.longitude)}}catch(c){s.e(c)}finally{s.f()}return{minLat:i,minLon:n,maxLat:a,maxLon:o}}},{key:"toggleVisibility",value:function(t){var e;t.visible=!t.visible,e=_.isSegment(t)?t.points[0].timestamp:t.timestamp,this.$emit("toggle-visibility",{timestamp:e.toString(),visible:t.visible})}},{key:"addFiles",value:function(){var t=this;this.isAddFileActive=!1,this.isLoading=!0,requestAnimationFrame((function(){requestAnimationFrame((function(){var e=t.filesToAdd.length;t.filesToAdd.forEach((function(i){t.gpxStore.add(i).catch((function(e){t.errorMessage=e.toString(),t.hasErrorMessage=!0})).finally((function(){e-=1,0===e&&(t.isLoading=!1)}))}))}))}))}}]),i}(d["e"]));u["a"]([Object(d["b"])("gpxStore")],P.prototype,"gpxStore",void 0),u["a"]([Object(d["c"])({required:!0})],P.prototype,"message",void 0),u["a"]([Object(d["c"])({required:!0})],P.prototype,"currentTrackIndex",void 0),u["a"]([Object(d["c"])({required:!0})],P.prototype,"currentSegmentIndex",void 0),u["a"]([Object(d["f"])("selectedTrack")],P.prototype,"onSelectedTrackChanged",null),u["a"]([Object(d["f"])("selectedObject")],P.prototype,"onSelectedObjectChanged",null),u["a"]([Object(d["f"])("currentTrackIndex")],P.prototype,"onCurrentTrackChanged",null),u["a"]([Object(d["f"])("currentSegmentIndex")],P.prototype,"onCurrentSegmentChanged",null),P=u["a"]([d["a"]],P);var A=P,F=A,D=(i("07fc"),i("734c"),i("2877")),z=Object(D["a"])(F,C,j,!1,null,"5317609e",null),I=z.exports,W=function(t){Object(c["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.infoText="",t.defaultInfoText="",t.mapLayersControl=null,t.nameToControlLayer=new Map,t.visibleTracks=new Map,t.displayable=T,t.locationPopup=v.a.popup(),t.currentTrackIndex=-1,t.currentSegmentIndex=-1,t.timeToSegment=new Map,t.timeToWaypoint=new Map,t.selectedOptions={},t.defaultWaypointOptions={radius:3.5,weight:1,color:"cyan",fillColor:"cyan",fillOpacity:1},t.noMovementWaypointOptions={radius:8,weight:2,color:"saddlebrown",fillColor:"saddlebrown",fillOpacity:1},t.groupedWaypointOptions={radius:8,weight:4,color:"red",fillColor:"red",fillOpacity:1},t.nextLineOption=0,t.lineOptions=[{color:"#008B8B",weight:5,dashArray:"",opacity:.9},{color:"#6B8E23",weight:5,dashArray:"",opacity:.9},{color:"#CD5C5C",weight:5,dashArray:"",opacity:.9},{color:"#0000FF",weight:5,dashArray:"",opacity:.7},{color:"#663399",weight:5,dashArray:"",opacity:.9},{color:"#FF69B4",weight:5,dashArray:"",opacity:.9},{color:"#00FFFF",weight:5,dashArray:"",opacity:.7},{color:"#00FF7F",weight:5,dashArray:"",opacity:.8},{color:"#DC143C",weight:5,dashArray:"",opacity:.8},{color:"#87CEFA",weight:5,dashArray:"",opacity:.8},{color:"#6A5ACD",weight:5,dashArray:"",opacity:.8},{color:"#FF4500",weight:5,dashArray:"",opacity:.8}],t}return Object(r["a"])(i,[{key:"mounted",value:function(){this.initializeMap(),this.onTracksChanged()}},{key:"activeTracks",get:function(){return this.gpxStore.files}},{key:"setSelectedMessage",value:function(t){this.infoText=t&&""!==t?t:this.defaultInfoText}},{key:"highlightNearestPoint",value:function(t){var e={color:"black",opacity:.5,radius:3,fill:!0,fillColor:"#40E0D0",fillOpacity:.8};this.highlightedPoint?(this.highlightedPoint.setLatLng([t.latitude,t.longitude]).addTo(this.map),this.highlightedPoint.options=e):this.highlightedPoint=new v.a.Circle([t.latitude,t.longitude],e).addTo(this.map)}},{key:"selectPoint",value:function(t,e,i,n){t&&(t.originalEvent._gpxHandled=!0,t.originalEvent.stopImmediatePropagation());var a={color:"#FF6347",opacity:.5,radius:3,fill:!0,fillColor:"#FF6347",fillOpacity:.8};(this.selectedPath||this.highlightedPoint)&&this.clearSelection(),this.selectedPoint!==i&&(this.clearSelection(),this.selectedPoint=i,this.selectedOptions=n,i.setStyle(a))}},{key:"selectWaypoint",value:function(t,e,i,n){t&&(t.originalEvent._gpxHandled=!0,t.originalEvent.stopImmediatePropagation());var a=T.timeWithSeconds(e.timestamp,e.timezoneName),o="";if(e.rangic){var s=T.timeWithSeconds(e.rangic.finishTime,e.timezoneName),r=T.duration(e.timestamp,e.rangic.finishTime),c=S.distanceLL(e.rangic.beginLatitude,e.rangic.beginLongitude,e.rangic.finishLatitude,e.rangic.finishLongitude),l=T.milesString(c/1e3);o="stop: ".concat(a," - ").concat(s,"; ").concat(e.rangic.stopType,"; ").concat(r,", ").concat(l)}else o="waypoint: ".concat(a,"; ").concat(e.name);(this.selectedPath||this.highlightedPoint)&&this.clearSelection();var u={color:"#0000CD",opacity:.8,radius:15,fill:!0,fillColor:n.fillColor,fillOpacity:1,weight:10};this.selectedPoint!==i&&(this.clearSelection(),this.selectedPoint=i,this.selectedOptions=n,i.setStyle(u),i.setRadius(u.radius)),this.setSelectedMessage(o)}},{key:"selectPath",value:function(t,e,i,n){t&&(t.originalEvent._gpxHandled=!0,t.originalEvent.stopImmediatePropagation()),(this.selectedPoint||this.highlightedPoint)&&this.clearSelection(),e!==this.selectedPath&&(this.clearSelection(),this.selectedPath=e,this.selectedOptions=i,e.setStyle({color:"#0000FF",weight:10,opacity:1})),this.setSelectedMessage(n)}},{key:"clearSelection",value:function(){if(this.highlightedPoint&&(this.highlightedPoint.removeFrom(this.map),this.highlightedPoint=void 0),this.selectedPoint){if(this.selectedPoint.setStyle(this.selectedOptions),this.selectedOptions){var t=this.selectedOptions;this.selectedPoint.setRadius(t.radius)}this.selectedPoint=void 0}this.selectedPath&&(this.selectedPath.setStyle(this.selectedOptions),this.selectedPath=void 0),this.setSelectedMessage("")}},{key:"makeVisible",value:function(t){var e={padding:v.a.point(100,100)};if(_.isSegment(t)){if(t.points.length>1){var i=t.points[Math.ceil(t.points.length/2)];this.map.panInside(v.a.latLng(i.latitude,i.longitude),e)}}else _.isWaypoint(t)&&this.map.panInside(v.a.latLng(t.latitude,t.longitude),e)}},{key:"sizeToBounds",value:function(t){var e=t;this.map.fitBounds(v.a.latLngBounds([e.minLat,e.minLon],[e.maxLat,e.maxLon]))}},{key:"addRectangle",value:function(t){var e=t,i=v.a.latLngBounds([[Math.min(e[0],e[2]),Math.min(e[1],e[3])],[Math.max(e[0],e[2]),Math.max(e[1],e[3])]]);new v.a.Rectangle(i,{color:"#FF7788",weight:5}).addTo(this.map),this.map.fitBounds(i)}},{key:"gotoLocation",value:function(t){var e=t,i=this.map.getZoom();this.map.setView(v.a.latLng(e[0],e[1]),i)}},{key:"selectTrackIndex",value:function(t){var e=t;this.currentTrackIndex=e,this.currentSegmentIndex=0}},{key:"selectSegmentByTime",value:function(t){var e=t,i=this.timeToSegment.get(e);if(i){this.selectPath(void 0,i.path,i.options,"");var n=this.getSegmentMessage(i.segment);this.setSelectedMessage("".concat(n)),this.makeVisible(i.segment)}}},{key:"selectWaypointTime",value:function(t){var e=t,i=this.timeToWaypoint.get(e);i&&(this.selectWaypoint(void 0,i.waypoint,i.circle,i.options),this.makeVisible(i.waypoint))}},{key:"toggleVisibility",value:function(t){var e=t,i=this.timeToSegment.get(e.timestamp);if(i)e.visible?i.path.addTo(this.map):i.path.removeFrom(this.map);else{var n=this.timeToWaypoint.get(e.timestamp);n&&(e.visible?n.circle.addTo(this.map):n.circle.removeFrom(this.map))}}},{key:"onTracksChanged",value:function(){var t=this,e=this.activeTracks.filter((function(e){return!t.visibleTracks.has(e.name)})),i=new Set(this.activeTracks.map((function(t){return t.name}))),n=Object(f["a"])(this.visibleTracks.keys()),a=n.filter((function(t){return!i.has(t)}));if(a.forEach((function(e){var i=t.visibleTracks.get(e);t.remove(e,i),t.visibleTracks.delete(e)})),e.forEach((function(e){var i=t.add(e);t.visibleTracks.set(e.name,i)})),this.activeTracks.length>0){var o=this.activeTracks.slice(-1)[0];this.defaultInfoText="".concat(T.dayOfWeek(o.startDate,o.timezoneName),", ")+"".concat(T.date(o.startDate,o.timezoneName),"; ")+"".concat(T.milesString(o.kilometers),", ")+"".concat(T.durationGpx(o)),(this.currentTrackIndex<0||this.currentTrackIndex>=this.activeTracks.length)&&(this.currentTrackIndex=this.activeTracks.length-1,this.currentSegmentIndex=0)}else this.defaultInfoText="",this.currentTrackIndex=-1,this.currentSegmentIndex=-1;this.setSelectedMessage(this.defaultInfoText)}},{key:"remove",value:function(t,e){this.mapLayersControl&&this.nameToControlLayer.has(t)&&this.mapLayersControl.removeLayer(this.nameToControlLayer.get(t)),e.removeFrom(this.map),this.selectedPoint&&this.selectedPoint.removeFrom(this.map)}},{key:"add",value:function(t){var e=this,i=new v.a.FeatureGroup;return t.waypoints.forEach((function(n,a){e.addWaypoint(i,t,n,a)})),t.tracks.forEach((function(n,a){e.addTrack(i,t,n,a)})),i.addTo(this.map),this.addToMapLayersControl(i,t.name),this.visibleTracks.size<1&&this.map.fitBounds([[t.bounds.minLat,t.bounds.minLon],[t.bounds.maxLat,t.bounds.maxLon]],void 0),i}},{key:"addWaypoint",value:function(t,e,i,n){var a=this,o=this.defaultWaypointOptions;i.rangic&&("noMovement"==i.rangic.stopType&&(o=this.noMovementWaypointOptions),"groupedStops"==i.rangic.stopType&&(o=this.groupedWaypointOptions));var s=new v.a.Circle([i.latitude,i.longitude],o);s.addTo(t),s.on("click",(function(t){var e=s;a.selectWaypoint(t,i,e,o)})),this.timeToWaypoint.set(i.timestamp.toString(),{waypoint:i,circle:s,options:o})}},{key:"addTrack",value:function(t,e,i,n){var a=this;i.segments.forEach((function(i,o){a.addSegment(t,e,n,o,i,a.lineOptions[a.nextLineOption]),++a.nextLineOption,a.nextLineOption>=a.lineOptions.length&&(a.nextLineOption=0)}))}},{key:"addSegment",value:function(t,e,i,n,a,o){var s=this,r=("".concat(e.name,"; track #").concat(i+1,"; segment #").concat(n+1),a.points[0]),c=a.points.slice(-1)[0],l=this.getSegmentMessage(a),u={radius:5,weight:1,color:"#33A532",fillColor:"#33A532",fillOpacity:.8,className:"start-end-marker"},d=new v.a.Circle([a.points[0].latitude,a.points[0].longitude],u);d.on("click",(function(t){T.shortTime(a.points[0].timestamp,a.timezoneName);s.setSelectedMessage("".concat(l,"; start")),s.selectPoint(t,r,d,u)})),u.color="#D70025",u.fillColor="#D70025";var m=new v.a.Circle([a.points.slice(-1)[0].latitude,a.points.slice(-1)[0].longitude],u);m.on("click",(function(t){s.setSelectedMessage("".concat(l,"; end at ").concat(T.timeWithSeconds(c.timestamp,a.timezoneName))),s.selectPoint(t,c,m,u)}));var h=new v.a.LayerGroup,p={radius:.4,weight:.3,color:"#000",fillColor:o.color,fillOpacity:.4};a.points.forEach((function(t,e){var i=new v.a.Circle(new v.a.LatLng(t.latitude,t.longitude),p);i.addTo(h),i.on("click",(function(n){var o=a.points[Math.max(e-1,0)];s.selectPoint(n,t,i,p),s.showPointInfo(a,l,t,o)}))}));var f=!1,g=this.map;g.on("zoomend",(function(e){g.getZoom()>19?f||(f=!0,t.addLayer(h)):f&&(f=!1,t.removeLayer(h))}));var b=a.points.map((function(t){return new v.a.LatLng(t.latitude,t.longitude)})),y=new v.a.Polyline(b,o);y.on("click",(function(t){var e=t,i=S.nearestPoint(a.points,e.latlng.lat,e.latlng.lng);s.selectPath(t,y,o,""),s.showPointInfo(a,l,i.point,i.prevPoint),s.highlightNearestPoint(i.point),s.currentSegmentIndex=n})),y.addTo(t),this.timeToSegment.set(a.points[0].timestamp.toString(),{segment:a,path:y,options:o})}},{key:"getSegmentMessage",value:function(t){var e=t.points[0],i=t.points.slice(-1)[0],n=T.speedMph(T.secondsInSegment(t),t.kilometers);return"segment; "+"".concat(T.timeWithSeconds(e.timestamp,t.timezoneName)," - ")+"".concat(T.timeWithSeconds(i.timestamp,t.timezoneName),"; ")+"".concat(T.milesString(t.kilometers),", ")+"".concat(n,", ")+"".concat(T.durationPoints(e,i))}},{key:"showPointInfo",value:function(t,e,i,n){var a=T.durationAsSeconds(n.timestamp,i.timestamp),o=i.calculatedMeters,s=T.yardsString(o),r=T.speedMsToMph(o/a),c=T.timeWithSeconds(i.timestamp,t.timezoneName),l=i.calculatedCourse;this.setSelectedMessage("".concat(e,"; [ ").concat(c,", ").concat(r," (").concat(s,"), ").concat(l,"° ]"))}},{key:"addToMapLayersControl",value:function(t,e){null==this.mapLayersControl?this.mapLayersControl=v.a.control.layers(void 0,Object(p["a"])({},e,t),{position:"topright",collapsed:!1}).addTo(this.map):this.mapLayersControl.addOverlay(t,e),this.nameToControlLayer.set(e,t)}},{key:"showLocationPopup",value:function(t,e){var i="https://en.wikipedia.org/wiki/Special:Nearby#/coord/".concat(t,",").concat(e),n="http://wikimapia.org/#lang=en&lat=".concat(t,"&lon=").concat(e,"&z=19/");this.locationPopup.setLatLng(v.a.latLng(t,e)).setContent('<a class="location-popup-link" href="'.concat(i,'" target="_blank" > Nearby on Wikipedia </a>')+'<br><a class="location-popup-link" href="'.concat(n,'" target="_blank" > Explore on Wikimapia </a>')).addTo(this.map)}},{key:"initializeMap",value:function(){var t=this;this.map||(this.map=v.a.map("map",{center:[20,0],zoom:2,minZoom:2,zoomControl:!1}),v.a.control.zoom({position:"topright"}).addTo(this.map),v.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxNativeZoom:19,maxZoom:22,attribution:'&copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'}).addTo(this.map),v.a.control.scale({position:"bottomright",maxWidth:300}).addTo(this.map),this.map.on("click",(function(e){var i=e;i.originalEvent&&i.originalEvent._gpxHandled||t.clearSelection()})),this.map.on("contextmenu",(function(e){var i=e;t.showLocationPopup(i.latlng.lat,i.latlng.lng)})))}}]),i}(d["e"]);u["a"]([Object(d["b"])("gpxStore")],W.prototype,"gpxStore",void 0),u["a"]([Object(d["f"])("activeTracks")],W.prototype,"onTracksChanged",null),W=u["a"]([Object(d["a"])({components:{Info:I}})],W);var N=W,E=N,G=(i("5490"),i("0cb1"),Object(D["a"])(E,m,h,!1,null,"66d74e5f",null)),q=G.exports,B=function(){function t(){Object(s["a"])(this,t),this.files=[]}return Object(r["a"])(t,[{key:"get",value:function(t){for(var e=0;e<this.files.length;++e)if(this.files[e].name===t)return this.files[e]}},{key:"add",value:function(t){var e=this;return new Promise((function(i,n){var a=new FileReader;a.onloadend=function(t){return function(){var o=a.result;(new _).parse(t.name,o,!0).then((function(t){d["e"].set(e.files,e.files.length,t),i(t)})).catch((function(t){n(t)}))}}(t),a.readAsText(t)}))}},{key:"remove",value:function(t){var e=this.files.indexOf(t);e>=0&&d["e"].delete(this.files,e)}}]),t}(),R=function(t){Object(c["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.gpxStore=new B,t}return Object(r["a"])(i,[{key:"mounted",value:function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px")),window.addEventListener("resize",(function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))}))}}]),i}(d["e"]);u["a"]([Object(d["d"])("gpxStore")],R.prototype,"gpxStore",void 0),R=u["a"]([Object(d["a"])({components:{Map:q}})],R);var H=R,$=H,V=(i("034f"),Object(D["a"])($,a,o,!1,null,null,null)),K=V.exports,Z=(i("becf"),i("289d"));i("5abe");n["a"].use(Z["a"],{defaultIconPack:"fas"}),n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(K)}}).$mount("#app")}});